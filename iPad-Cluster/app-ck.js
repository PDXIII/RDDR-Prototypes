// Config
function makeDragObjects(e){var t=new ImageView({width:50,height:50,x:50,y:50,image:"../assets/db/images/"+e.images[0]});t.addClass("dragObject");var n=new View({opacity:0,width:50,height:50,x:0,y:0});n.addClass("colorLayer");t.addSubView(n);t.dragger=new ui.Draggable(t);t.on(Events.DragStart,function(){t.bringToFront();t.scale=.7;t.animate({properties:{scale:1.2,opacity:.8},curve:"spring(100, 10, 100)"})});t.on(Events.DragMove,function(){t.x<-25||t.x>360||t.y<-25||t.y>455?t._subViews[0].opacity=.5:t.x>-25&&t.x<360&&t.y>-25&&t.y<455&&(t._subViews[0].opacity=0);console.log(t.x+" / "+t.y)});t.on(Events.DragEnd,function(){t.x<-25||t.x>360||t.y<-25||t.y>455?t.animate({properties:{scale:2,opacity:0},curve:"spring(100, 10, 100)"}):t.animate({properties:{scale:1,opacity:1},curve:"spring(100, 10, 100)"})});ObjectSpace.addSubView(t);dragObjArray.push(t)}function openStack(e,t){PlusButton.animate({properties:{rotation:45},time:e,curve:t});ObjectSpace.animate({properties:{y:ObjectSpace.originalFrame.y-80},time:e,curve:t});stackVisible=!0}function closeStack(e,t){PlusButton.animate({properties:{rotation:0},time:e,curve:t});ObjectSpace.animate({properties:{y:ObjectSpace.originalFrame.y},time:e,curve:t});stackVisible=!1}function openClusterInfo(e,t){Scene._subViews[3].animate({properties:{y:80},time:e,curve:t});Scene._subViews[3]._subViews[0]._subViews[2].animate({properties:{y:20},curve:"spring(200,10,10)"});stackVisible=!0}function closeClusterInfo(e,t){Scene._subViews[3].animate({properties:{y:722},time:e,curve:t});stackVisible=!1}function openMenu(e,t){Scene.animate({properties:{x:Scene.originalFrame.x+300},time:e,curve:t});menuVisible=!0}function closeMenu(e,t){Scene.animate({properties:{x:Scene.originalFrame.x},time:e,curve:t});menuVisible=!1}function makePlusBtn(){PlusButton.on("click",function(){stackVisible?closeStack(time,curve):openStack(time,curve)});PlusButton.addClass("btn")}function makeSmallInfoBtn(){SmallInfoButton.on("click",function(){var e=250,t="ease-in-out";clusterInfoVisible?closeClusterInfo(e,t):openClusterInfo(e,t)});SmallInfoButton.addClass("btn")}function makeMenuBtn(){MenuButton.on("click",function(){var e=250,t="ease-in-out";menuVisible?closeMenu(e,t):openMenu(e,t)});MenuButton.addClass("btn")}function placeObjects(){}function makeClusterInfo(e){var t=new View({width:384,height:1e3,x:0,y:722}),n=new View({width:384,height:1e3,x:0,y:0}),r=new View({width:384,height:50,x:0,y:20,html:"zur√ºck"});r.addClass("action");n.addSubView(r);var i=new View({width:384,height:infoGuiSize[1],x:0,y:214});i.addClass("infoButtonsRow");n.addSubView(i);var s=new View({width:infoGuiSize[0],height:infoGuiSize[1],x:18,y:0,html:"Info"});s.on("click",function(){s.opacity=1;o.opacity=.5;u.opacity=.5;n.animate({properties:{y:0},curve:curve,time:time});$(".scrollField").animate({scrollTop:0})});s.addClass("infoButton infoGui");i.addSubView(s);var o=new View({width:infoGuiSize[0],height:infoGuiSize[1],x:138,y:0,html:"Beschreibung",opacity:.5});o.on("click",function(){o.opacity=1;s.opacity=.5;u.opacity=.5;n.animate({properties:{y:-200},curve:curve,time:time});$(".scrollField").animate({scrollTop:195})});o.addClass("textButton infoGui");i.addSubView(o);var u=new View({width:infoGuiSize[0],height:infoGuiSize[1],x:258,y:0,html:"DNA",opacity:.5});u.on("click",function(){u.opacity=1;s.opacity=.5;o.opacity=.5;n.animate({properties:{y:-200},curve:curve,time:time});$(".scrollField").animate({scrollTop:695})});u.addClass("dnaButton infoGui");i.addSubView(u);var a=new ImageView({width:174,height:174,x:102,y:60,image:"../assets/db/images/"+db.clusters[e].images[0]});a.addClass("infoImage");n.addSubView(a);var f=new View({width:174,height:174,x:0,y:0,opacity:0});f.addClass("colorLayer");a.addSubView(f);a.originalFrame=a.frame;a.originalFrame.y=20;a.dragger=new ui.Draggable(a);a.on(Events.DragMove,function(){a.x=102;if(a.y<=20)a.y=20;else if(a.y>=60){a._subViews[0].opacity=.5;a.y=60}else a._subViews[0].opacity=0});a.dragger.on(Events.DragEnd,function(){a.y>=60?closeClusterInfo(time,curve):a.animate({properties:{y:20},curve:"spring(200,10,10)"});a._subViews[0].opacity=0});var l=new ScrollView({width:386,height:600,x:0,y:254});l.addClass("scrollField");n.addSubView(l);l.addSubView(addKeyValueView(e,"name","Name",0));l.addSubView(addKeyValueView(e,"designer","Designer",1));l.addSubView(addKeyValueView(e,"genus","Gattung",2));l.addSubView(addKeyValueView(e,"format","Format",3));l.addSubView(addKeyValueView(e,"year","Jahr",4));l.addSubView(addKeyValueView(e,"country","Land",5));var c=new View({width:348,height:400,x:18,y:200});c.addClass("descriptionView");l.addSubView(c);c.addSubView(addInfoHeadline("Beschreibung"));var h=new View({width:348,height:400,x:0,y:30,html:db.clusters[e].description});h.addClass("descriptionText");c.addSubView(h);l.addSubView(c);var p=new View({width:348,height:800,x:18,y:700});p.addSubView(makeDNA(e,0,"Physikalische Erscheinung"));p.addSubView(makeDNA(e,1,"Assoziative Wirkung"));p.addClass("dnaView");l.addSubView(p);n.addClass("infoView");t.addSubView(n);return t}function makeDNA(e,t,n){var r=new View({width:348,height:180,x:0,y:t*190});r.addSubView(addInfoHeadline(n));for(var i=0;i<5;i++)r.addSubView(addGenom(e,t,i));return r}function addInfoHeadline(e){var t=new View({width:348,height:30,x:0,y:0,html:e});t.addClass("infoHeadline");return t}function addGenom(e,t,n){var r=new View({width:348,height:30,x:0,y:30*n+30}),i=new View({width:140,height:30,x:0,y:0,html:db.questions[t].pairs[n][0]});i.addClass("pair left");r.addSubView(i);var s=returnPercent(db.clusters[e].dna[t].pairs[n]);for(var o=0;o<s.length;o++){var u=new View({width:15,height:15,x:o*19+148,y:7,opacity:returnOpacity(s[o])});u.addClass("miniResult");r.addSubView(u)}var a=new View({width:140,height:30,x:208,y:0,html:db.questions[t].pairs[n][1]});a.addClass("pair right");r.addSubView(a);return r}function addKeyValueView(e,t,n,r){var i=new View({width:384,height:30,x:0,y:r*30+5}),s=new View({width:128,height:30,x:0,y:0,html:n});s.addClass("keyView");i.addSubView(s);var o=new View({width:200,height:30,x:140,y:0,html:db.clusters[e][t]});o.addClass("valueView");i.addSubView(o);return i}Framer.config.animationPrecision=30;for(var layerGroupName in PSD){window[layerGroupName]=PSD[layerGroupName];PSD[layerGroupName].originalFrame=window[layerGroupName].frame}var menuVisible=!1,stackVisible=!1,clusterInfoVisible=!1,dragObjArray=[],infoGuiSize=[110,30,10],time=250,curve="ease-in-out";$(document).ready(function(){makeMenuBtn();makePlusBtn();makeSmallInfoBtn();Scene.addSubView(makeClusterInfo(0));db.objects.map(makeDragObjects)});